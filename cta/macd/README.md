# 缘起

看了 Devil's Advocate 的这个【[量化策略】胜率超8成，仅个位数回撤的融合策略！](https://www.youtube.com/watch?v=e6nMhYl8avk&ab_channel=Devil%27sAdvocate)后，
颇受启发，就想动手复现一把，就有了这个子项目。

# 思路
1、用北上资金来择时，实际上是一个布林通道，用来择时：超越上轨，就开仓、跌破下轨，就清仓。
细节：在突破后这段时间，都保持开仓状态，啥意思？就是一直可以加仓和操作（也包括卖，后面会说）。
但是，当跌破下轨的时候，就得把所有的手头持仓全部清掉。

2、股票池，用的是北上的每天的股票，作者用的是买入量最大的3-20位，
他用的是聚宽的数据，我无法获得（只能注册半年免费，否则，每年6000的使用费，忒贵），我用的是tushare，
只能获得top10，所以，我就用这10支了。来作为我每天的股票池。

3、每天，看如果是在布林通道上轨突破后的状态，我就看当日的股票池中的每只股票，
计算每只股票的RSRS值[（光大证券《基于阻力支撑相对强度（RSRS）的市场择时》2017.5](http://pg.jrj.com.cn/acc/Res/CN_RES/INVEST/2017/5/1/b4f37401-639d-493f-a810-38246b9c3c7d.pdf)）。

如果这只股票不在仓位内，就看它的RSRS值是不是超过上阈值。 如果超过，就可以将其买入进来。

如果这只股票已经在仓位内，就看它的RSRS值是不是跌破下阈值。如果跌破，就将其卖出清仓。

这个阈值计算有联众方法： 一种是斜率当指标，一种是把斜率标准化： 

3.1 斜率RSRS

就是算18天内的beta值。 然后根据beta值，设置了1的上阈值，和0.8的下阈值，这个不是瞎定的，是根据光大的研报做过数据统计后给出的合理值。

>斜率指标交易策略为：
>1. 计算 RSRS 斜率。
>2. 如果斜率大于 1，则买入持有。
>3. 如果斜率小于 0.8，则卖出手中持股平仓。

3.2 标准分RSRS

上面的斜率RSRS波动比较大，看研报p9/图7，会在[0.39~1.38]，
波动比较大，所以，就想到能不能做一个归一化。

一般归一化是为了解决，数据范围参差不齐的问题，是为了解决不同维度上数值波动大的问题，
比如学校男生的身高和体重，如果不归一化，两者范围完全不一致，
归一化后，都可以压缩到同一范围。
这里用的是["0均值标准化/Z-score standardization"](https://blog.csdn.net/bbbeoy/article/details/56665520)：
0均值归一化方法将原始数据集归一化为均值为0、方差1的数据集。

然后，用这样的一个方法，来选择阈值，这个时候的阈值，就变成了一个，
就是[S,-S]，研报给出的阈值推荐值是[0.7,-0.7]。

思考：

*我个人觉得标准分RSRS更好，因为，这个方法，可以适用到不同的股票和基金上，
原因是可能不同的股票的RSRS斜率分布的范围可能不太一样，用上面的[1,0.8]可能不具备普适性和灵活性。*

3.3 *改进*的标准分RSRS

为何还要对标准分RSRS还要改进呢？

原因是，标准分RSRS呈现的，还是一个左偏的分布（研报p14图14）。
为了使其更接近正态分布，所以，使用了修正方法：
$$ \beta * R^2 $$
修正后，偏度从-0.508 => 0.080，接近对称分布了（偏度=0）。

这个修正方法，是作用在标准分RSRS上，而不是直接的斜率RSRS上，原因是：
>这种修正方式是由决定系数的大小直接决定对于拟合效果的惩罚力度，因此并不适合
直接用于斜率指标。若直接与斜率相乘，实质上更多效果只是拉大斜率的大
小差距，而并没有对拟合效果差的惩罚效果。

思考：

*你说为何要调整成对称分布呢？是为了修正左偏么？左偏确实是左侧，负斜率的偏多，但是，这个是根本原因么？*

# 总结和感受
- RSRS是核心，这个2017的研报，而且很有效，应该很多人知道，也在用了，所以效果可能会缩减
- 斜率RSRS=>标准分RSRS=>改进的标准分RSRS，整体沿袭这个思路，来改进RSRS。
- RSRS原研报用的是ETF，比如沪深300、中证500，作者把他改在了个股上，而且用了北上资金的选股池，这点有意思，这个让我想到了邢不行的北上资金选股的，单纯的北上资金就可以取得不错的效果
- 三融合策略的作者除了RSRS，还叠加了布林通道作为大盘择时，就是大盘不好，就不玩了。其实研报也做了这个限定，不在下跌的时候买入，这个思路是异曲同工的
- 我觉得这个策略有很多拓展空间：
  - 股票池的选取可以考虑其他逻辑：比如用中证500股票池；比如用邢不行的散户逆向选股策略；
  - 择时可以考虑其他逻辑：比如凯特勒通道
- 这个可以考虑作为我的一个实盘策略，但是还是要充分回测

# 数据
- [tushare北向资金的情况](https://tushare.pro/document/2?doc_id=47)
- [tushare北向资金的10大股](https://tushare.pro/document/2?doc_id=48)
- [聚宽沪深港通持股数据](https://www.joinquant.com/help/api/help#Stock:%E6%B2%AA%E6%B7%B1%E6%B8%AF%E9%80%9A%E6%8C%81%E8%82%A1%E6%95%B0%E6%8D%AE)

*注:聚宽数据需要申请JQData，3个月免费，6000元+/年，我没有申请，用他的研究环境下载了北上持股数据*

# 参考
- [胜率超8成，仅个位数回撤的融合策略！](https://www.youtube.com/watch?v=e6nMhYl8avk&ab_channel=Devil%27sAdvocate)
- [三元融合策略](https://mp.weixin.qq.com/s/iX887oJw6gQ_mBRJaIyHQQ)
- [RSRS(阻力支撑相对强度)择时策略](https://zhuanlan.zhihu.com/p/33501881)
- [光大证券《基于阻力支撑相对强度（RSRS）的市场择时》2017.5](http://pg.jrj.com.cn/acc/Res/CN_RES/INVEST/2017/5/1/b4f37401-639d-493f-a810-38246b9c3c7d.pdf)
